import{h as b,al as I,az as P,d as y,r as s,a9 as c,aA as k,aB as v,j as e,v as w,aC as i,I as u,B as m,aw as R}from"./index-671c4982.js";import{P as S}from"./index-f0af1382.js";const _=o=>b.post("v1/project/update",o),q=()=>{I().start();const o=P(),{project_id:a}=y().state,[n,j]=s.useState({description:"",projectname:""}),[l,x]=s.useState(0),h=s.useCallback(t=>{t.projectid=a,_(t).then(r=>{r.data.code===200?c.success("修改成功"):c.error("修改失败")})},[a]),f=s.useCallback(()=>{},[]),d=s.useCallback(()=>{k(a).then(t=>{t.data.code===200?(c.success("删除成功"),o("/user",{state:{user_id:localStorage.getItem("user_id")}})):c.error("删除失败")})},[o,a]),g=s.useCallback(t=>{d()},[d]),C=t=>{};return s.useEffect(()=>{async function t(r){const p=await R(r);p.data.code===200&&x(p.data.data.role)}t(a),v(a).then(r=>{r.data.code===200&&j(r.data.data)})},[a]),e.jsx(w,{children:e.jsx("div",{className:"project-set",children:e.jsx("div",{className:"form",children:e.jsxs(i,{name:"basic",labelCol:{span:4},wrapperCol:{span:20},style:{width:600},initialValues:{remember:!0},onFinish:h,onFinishFailed:f,autoComplete:"off",children:[n.description?e.jsx(i.Item,{label:"项目名称",name:"projectname",rules:[{required:!0,message:"请输入项目名称!"}],initialValue:n.projectname,children:e.jsx(u,{disabled:l!==1})}):"",n.description?e.jsx(i.Item,{label:"项目描述",name:"description",rules:[{required:!0,message:"请输入项目描述!"}],initialValue:n.description,children:e.jsx(u,{disabled:l!==1})}):"",l===1?e.jsxs(i.Item,{wrapperCol:{offset:8,span:16},children:[e.jsx(m,{type:"primary",htmlType:"submit",style:{marginRight:"10px"},children:"确定"}),e.jsx(S,{title:"谨慎操作！",style:{marginLeft:"40px"},description:"确定删除本项目吗?",onConfirm:g,onCancel:C,okText:"确定",cancelText:"取消",children:e.jsx(m,{danger:!0,children:"删除项目"})})]}):""]})})})})};export{q as default};
