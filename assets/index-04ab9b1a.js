import{h as y,ai as C,aw as I,d as P,r as l,ax as w,j as e,p as R,ay as o,I as p,B as u,a6 as n,at as S,az as _}from"./index-73b16c9b.js";import{P as v}from"./index-513d3b77.js";const F=c=>y.post("v1/project/update",c),E=()=>{C().start();const c=I(),{project_id:a}=P().state,[r,m]=l.useState({description:"",projectname:""}),[i,j]=l.useState(0),x=t=>{t.projectid=a,F(t).then(s=>{s.data.code===200?n.success("修改成功"):n.error("修改失败")})},h=()=>{},f=()=>{_(a).then(t=>{t.data.code===200?(n.success("删除成功"),c("/user",{state:{user_id:localStorage.getItem("user_id")}})):n.error("删除失败")})},g=t=>{f()},b=t=>{};return l.useEffect(()=>{async function t(s){const d=await S(s);d.data.code===200&&j(d.data.data.role)}t(a),w(a).then(s=>{s.data.code===200&&m(s.data.data)})},[]),e.jsx(R,{children:e.jsx("div",{className:"project-set",children:e.jsx("div",{className:"form",children:e.jsxs(o,{name:"basic",labelCol:{span:4},wrapperCol:{span:20},style:{width:600},initialValues:{remember:!0},onFinish:x,onFinishFailed:h,autoComplete:"off",children:[r.description?e.jsx(o.Item,{label:"项目名称",name:"projectname",rules:[{required:!0,message:"请输入项目名称!"}],initialValue:r.projectname,children:e.jsx(p,{disabled:i!==1})}):"",r.description?e.jsx(o.Item,{label:"项目描述",name:"description",rules:[{required:!0,message:"请输入项目描述!"}],initialValue:r.description,children:e.jsx(p,{disabled:i!==1})}):"",i===1?e.jsxs(o.Item,{wrapperCol:{offset:8,span:16},children:[e.jsx(u,{type:"primary",htmlType:"submit",style:{marginRight:"10px"},children:"确定"}),e.jsx(v,{title:"谨慎操作！",style:{marginLeft:"40px"},description:"确定删除本项目吗?",onConfirm:g,onCancel:b,okText:"确定",cancelText:"取消",children:e.jsx(u,{danger:!0,children:"删除项目"})})]}):""]})})})})};export{E as default};
