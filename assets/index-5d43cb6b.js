import{k as m,ai as C,av as P,d as y,r as l,aw as v,j as e,q as w,ax as n,I as p,B as u,a6 as c,at as R}from"./index-b1dba4f0.js";import{P as S}from"./index-157332c6.js";const q=a=>m.post("v1/project/update",a),F=a=>m.post("v1/project/delete",{projectid:a}),N=()=>{C().start();const a=P(),{project_id:r}=y().state,[o,j]=l.useState({description:"",projectname:""}),[i,x]=l.useState(0),f=t=>{t.projectid=r,q(t).then(s=>{s.data.code===200?c.success("修改成功"):c.error("修改失败")})},h=t=>{},g=()=>{F(r).then(t=>{t.data.code===200?(c.success("删除成功"),a("/user",{state:{user_id:localStorage.getItem("user_id")}})):c.error("删除失败")})},I=t=>{g()},b=t=>{};return l.useEffect(()=>{async function t(s){let d=await R(s);d.data.code===200&&x(d.data.data.role)}t(r),v(r).then(s=>{s.data.code===200&&j(s.data.data)})},[]),e.jsx(w,{children:e.jsx("div",{className:"project-set",children:e.jsx("div",{className:"form",children:e.jsxs(n,{name:"basic",labelCol:{span:4},wrapperCol:{span:20},style:{width:600},initialValues:{remember:!0},onFinish:f,onFinishFailed:h,autoComplete:"off",children:[o.description?e.jsx(n.Item,{label:"项目名称",name:"projectname",rules:[{required:!0,message:"请输入项目名称!"}],initialValue:o.projectname,children:e.jsx(p,{disabled:i!==1})}):"",o.description?e.jsx(n.Item,{label:"项目描述",name:"description",rules:[{required:!0,message:"请输入项目描述!"}],initialValue:o.description,children:e.jsx(p,{disabled:i!==1})}):"",i===1?e.jsxs(n.Item,{wrapperCol:{offset:8,span:16},children:[e.jsx(u,{type:"primary",htmlType:"submit",style:{marginRight:"10px"},children:"确定"}),e.jsx(S,{title:"谨慎操作！",style:{marginLeft:"40px"},description:"确定删除本项目吗?",onConfirm:I,onCancel:b,okText:"确定",cancelText:"取消",children:e.jsx(u,{danger:!0,children:"删除项目"})})]}):""]})})})})};export{N as default};
